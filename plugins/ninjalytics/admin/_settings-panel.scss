/* todo Changes 50% width panel, needs to be revisited for mobile */

body.toplevel_page_hm_sbp {
  background-color: $gray1;
  }


/* Split layout */
#ninjalytics-settings-settings > * {
  width      : 100%;

  @media (min-width : 981px) {
    width : 50%;
    }
  float      : left;
  box-sizing : border-box; /* Ensure padding/border don't affect width */

  &:first-child {
    padding-right : 10px;
    }
  }

#ninjalytics-settings-settings::after {
  content : "";
  display : table;
  clear   : both;
  }

/* Toggle section container */
#ninjalytics-settings > div {
  margin-bottom : 10px;
  overflow      : hidden;
  border        : 1px solid #d8dde1;
  border-radius : 10px;
  }

/* Toggle title (h3) */
#ninjalytics-settings .ags-psr-section-title {
  cursor          : pointer;
  margin          : 0;
  padding         : 0 10px 0 0;
  display         : flex;
  flex-wrap       : wrap;
  justify-content : space-between;
  align-items     : center;

  h3 {
    padding   : 15px;
    margin    : 0;
    font-size : 14px;
    flex-grow : 1;
    }

  label {
    visibility  : hidden;
    opacity     : 0;
    align-items : center;
    font-weight : normal;
    font-size   : 14px;
    transition  : all ease-in .2s;
    }
  }

/* Toggle body */
#ninjalytics-settings .ags-psr-section-body {
  padding : 20px 10px 10px 15px;
  display : none;
  }

#ninjalytics-settings > .ninjalytics-settings-toggle:not(.hm-psr-active) {
  position: relative;

  &:after {
    content : "";
    position: absolute;
    top     : 0;
    right   : 10px;
    bottom  : 0;
    width   : 16px;
    background      :  url("../images/dropdown.svg") no-repeat center center;
    background-size : 16px;
    }
}

/* Toggle Opened */
#ninjalytics-settings > .ninjalytics-settings-toggle.hm-psr-active {
  .ags-psr-section-body {
    display : block;
    }

  .ags-psr-section-title {
    border-bottom : 1px solid $gray;
    }

  .ags-psr-section-title label {
    visibility : visible;
    opacity    : 1;
    }
  }

#ags-psr-date-range,
#ags-psr-display-mode,
#ags-psr-display-toolbar,
.ags-psr-display-toolbar-left {
  display        : flex;
  flex-direction : row;
  align-items    : center;
  flex-wrap      : wrap;
  gap            : 5px;
  }

#ags-psr-display-toolbar {
  row-gap : 10px;
  margin-bottom: 10px;

  .ags-psr-display-toolbar-left {
    width : calc( 50% - 10px );
  }

  #ags-psr-display-mode {
    gap : 8px;

    .ags-psr-display-options {
      display        : flex;
      flex-direction : row;
      gap            : 6px;
      }

    input:checked + label {
      background-color : $primary;
      }

    input:checked + label > img {
      filter : brightness(0) invert(1);
      }

    label {
      display     : flex;
      align-items : center;
      gap         : 4px;
      cursor      : pointer;
      padding: 6px;

      &::before {
        display: none;
        }
      }

    input {
      display : none;
      }
    }
  }

#ags-psr-date-range {
  row-gap        : 10px;
  flex-grow: 1;
  flex-shrink: 1;
  flex-wrap: nowrap;
  justify-content: flex-end;


  input#ags-psr-dates-desc {
    max-width : 277px;
    width: 100%;
    }



  a {
    text-decoration : none;
    font-size       : 13px;
    color           : $secondary;

    strong {
      font-weight : normal;
      white-space : nowrap;
      }

    &:focus {
      box-shadow : none
      }
    }
  }

#ags-psr-download-email {
  display         : flex;
  align-items     : center;
  margin-left     : auto;
  gap             : 5px;
  width           : 50%;
  justify-content : flex-end;
  }

#ags-psr-report-meta {
  gap           : 5px;
  margin-bottom : 20px;
  border: 1px solid $gray;
  border-radius: 10px;
  padding: 15px;

  label {
    display       : flex;
    flex-direction: column;
    gap: 10px;
    }

  input {
    flex-grow : 1
    }
  }

/* End */

#ninjalytics-form {
  .hm_psr_submit_wrapper {
    margin-top : 1.5em;

    & > * {
      margin-right  : 10px;
      margin-bottom : 10px;
      }

    .hm_psr_email_report {
      display : inline-flex;
      gap     : 4px;

      button {
        width : 180px;
        }
      }
    }
  }

#hm_psr_tab_panels {
  border-radius : 3px;

  .hm_psr_tab_panel {
    padding : 25px 20px;
    }
  }

#hm_psr_tab_presets_panel {
  width       : 100%;
  font-size   : 14px;
  padding     : 0 !important;
  font-weight : 600;

  a {
    color           : $secondary;
    text-decoration : none;

    &:focus {
      box-shadow : unset;
      }
    }

  td {
    padding        : 8px 5px;
    border-bottom  : 1px solid $middleBorderColor;
    vertical-align : middle;
    font-weight    : bold;

    &:last-child {
      width      : 150px;
      text-align : right;
      }
    }

  tr:last-child td {
    border         : 0;
    padding-bottom : 0;
    }

  tr:first-child td {
    padding-top : 0;
    }

  .dashicons {
    font-size     : 20px;
    width         : 30px;
    height        : 30px;
    line-height   : 30px;
    margin-left   : 8px;
    border        : 1px solid $middleBorderColor;
    background    : transparent;
    border-radius : 8px;
    color         : #3a3a3a;
    box-shadow    : none !important;
    outline       : none !important;
    transition    : all .1s ease-in;

    &:first-of-type {
      margin-left : 0;
      }

    &:before {
      width  : 22px;
      height : 22px;
      }

    &.dashicons-download:before {
      content : url("../images/download.svg");
      }

    &.dashicons-edit:before {
      content : url("../images/edit.svg");
      }

    &.dashicons-trash:before {
      content : url("../images/delete.svg");
      }

    &:hover, &:hover {
      border-color     : $gray;
      background-color : $gray;
      }
    }

  @media (max-width : 600px) {
    // make table mobile friendly

    tr {
      border-bottom : 1px solid $gray;
      display       : block;
      padding       : 10px 0;

      &:last-child {
        border : none;
        }
      }

    td {
      display       : block;
      padding       : 0;
      margin-bottom : 5px;
      border        : none;
      text-align    : left !important;
      }
    }
  }

#hm_psr_tabs {
  border-bottom  : 1px solid #d8e3e8;
  padding-bottom : 20px;
  margin-bottom  : 30px;

  .nav-tab {
    border           : 1px solid #d8e3e8;
    border-radius    : 21px;
    background-color : transparent;
    font-size        : 12px;
    font-weight      : 500;
    padding          : 8px 20px;
    margin-left      : 3px;
    margin-bottom    : 5px;

    &:first-child {
      margin-left : 0;
      }

    &:focus {
      box-shadow : none !important;
      }

    &:not(.nav-tab-active):hover {
      background-color : #e0e4ec;
      }

    &.nav-tab-active {
      background-color : #e0e4ec;
      }
    }
  }

#hm_psr-current-preset {
  padding : 40px 0 20px;
  display : flex;

  @media (max-width : 980px) {
    flex-wrap : wrap;

    button {
      margin : 8px 8px 0 0;
      }
    }
  }

#hm_psr-buttons-wrapper {
  margin-top : 40px;
  }

// Order Filtering

#hm_sbp_field_report_start,
#hm_sbp_field_report_end {
  max-width : 160px;
  }

#hm_sbp_field_report_start_time,
#hm_sbp_field_report_end_time {
  max-width : 120px;
  }

.hm-psr-date-dynamic-field {
  width : auto !important;

  &:not(.hidden) {
    display : block;
    }
  }

.hm-psr-date-dynamic-toggle {
  margin-right   : 10px;
  box-shadow     : none !important;
  outline        : none !important;
  vertical-align : text-bottom;
  }

#hm_psr_order_meta_filter_settings,
#hm_psr_customer_meta_filter_settings,
#hm_psr_product_tag_filter_settings,
#hm_psr_product_meta_filter_settings {

  select, input[type=text], input[type=number] {
    width     : auto;
    max-width : 100%;
    }
  }

#hm_psr_order_meta_filter_settings {
  span {
    display     : flex;
    align-items : center;
    flex-wrap   : wrap;
    gap         : 5px;
    }
  }

#hm_psr_report_fields {
  height        : 100%;
  max-height    : 700px;
  overflow      : scroll;
  margin-bottom : 20px;
  border        : 1px solid $middleBorderColor;
  border-radius : 8px;

  & > div {
    display       : flex;
    align-items   : center;
    white-space   : nowrap;
    padding       : 5px 10px;

    input {
      max-width : 500px;
      }

    button {
      @include formButtonMixin("delete");
      background-color : #3a3a3a !important;
      height           : 30px;
      width            : 30px;
      min-width        : 30px;
      margin-right     : 6px;
      border-radius    : 5px;
      border           : 0;
      padding: 0;
      box-sizing: border-box;

      span {
        width  : 22px;
        height: 22px;
        }

      span:before {
        content : url("../images/x.svg");
        }
      }
    }
  }

#hm_psr_report_add_custom_field {
  display     : flex;
  flex-wrap   : wrap;
  align-items : center;
  position    : relative;

  & > * {
    margin : 0 5px 5px 0 !important;
    }

  .hm-psr-select-other-field {
    width : auto !important;

    @media (min-width : 980px) {
      min-width : 400px;
      }
    }
  }

#ninjalytics-settings label {

  &.hm_psr_chart_field,
  &.hm_psr_total_field,
  &.hm_psr_round_field {
    float          : right;
    text-align     : center;
    padding-left   : 10px;
    padding-right  : 10px;
    flex-direction : column;
    gap            : 5px;
    align-items    : center;
    color          : #b5becf;
    font-weight    : 500;

    span {
      display        : block;
      text-transform : uppercase;
      font-size      : 10px;
      line-height    : 10px;
      color: #0C2137;
      font-weight: 500;
      }

    input[type=checkbox] {
      margin : 0;
      }

    &.no-round, &.no-total {
      display : none !important;
      }

    }

  }

#hm-psr-product-cats {
  max-width     : 350px;
  width         : 100%;
  max-height    : 205px;
  overflow-y    : auto;
  margin-top    : 0;
  border        : 1px solid $middleBorderColor;
  border-radius : 8px;
  padding       : 10px;

  .children {
    padding-left : 25px;
    }

  label {
    margin-bottom : 12px;

    input[type=checkbox] {
      vertical-align : middle;
      }
    }
  }

#hm_psr_field_format_settings {
  .ninjalytics-format_options {
    margin-top : 10px;

    label {
      display       : block !important;
      margin-bottom : 15px;

      input[type=text] {
        max-width  : 225px;
        display    : block;
        margin-top : 5px;
        }
      }
    }
  }

#ninjalytics-settings {

  select, input[type=text], input[type=number] {
    vertical-align : middle;
    }

  // Dynamic date
  .hm_psr_filter_value_container > input[type=text] {
    margin-bottom : 8px;
    margin-right  : 10px;
    display       : inline-block;
    }

  #hm_psr_limit_number,
  #hm_psr_field_time_limit,
  #hm_psr_field_time_limit2 {
    display    : inline-block;
    width      : auto;
    max-width  : 80px;
    text-align : center;
    margin     : 0 5px;
    }

  #hm_psr_field_report_css {
    font-family : monospace;
    }
  }

#hm_psr_order_item_meta_filter_settings,
#hm_psr_order_item_meta_filter_1_value_2 {

  .hm_psr_filter_value_container {
    margin-right  : 10px;
    margin-bottom : 8px;

    & > * {
      display       : inline-block;
      margin-right  : 10px;
      margin-bottom : 8px;
      }
    }
  }


// Responsive

@media (max-width : 980px) {

#ninjalytics-settings-settings > *:first-child {
 padding-right: 0;
}

#ags-psr-display-toolbar > * {
  width: 100% !important;
  }

  #ags-psr-display-toolbar {
    flex-direction: column-reverse;
    }

  #hm_psr_output_container {
    margin-bottom: 20px;

    .dt-layout-row:first-child {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    }
  }